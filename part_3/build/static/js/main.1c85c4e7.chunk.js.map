{"version":3,"sources":["components/AddPerson.js","components/FilterPerson.js","components/Person.js","components/Persons.js","services/personDB.js","components/Notification.js","App.js","index.js"],"names":["NewPerson","props","react_default","a","createElement","onSubmit","addPerson","value","newName","onChange","handleNameChange","newNumber","handleNumberChange","type","FilterPerson","newSearch","handleSearchChange","Person","deletePerson","name","number","onClick","Persons","persons","filter","person","toUpperCase","includes","map","components_Person","key","id","handleDeletePerson","baseUrl","personDB","getAll","axios","get","then","response","data","create","newObject","post","update","put","concat","delete","Notification","_ref","message","className","App","_useState","useState","_useState2","Object","slicedToArray","setPersons","_useState3","_useState4","setNewName","_useState5","_useState6","setNewNumber","_useState7","_useState8","setNewSearch","_useState9","_useState10","errorMessage","setErrorMessage","useEffect","components_Notification","components_FilterPerson","event","target","AddPerson","preventDefault","personObject","length","window","confirm","previousPerson","find","n","replace","objectSpread","updatedPerson","catch","error","setTimeout","newPerson","console","log","components_Persons","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.1c85c4e7.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst NewPerson = (props) => {\r\n    return (\r\n        <form onSubmit={props.addPerson}>\r\n        nimi:\r\n        <input\r\n            value={props.newName}\r\n            onChange={props.handleNameChange} />\r\n            <br />\r\n        numero:\r\n        <input\r\n            value={props.newNumber}\r\n            onChange={props.handleNumberChange} />\r\n            <br />\r\n        <button type=\"submit\">lisää</button>\r\n        </form> \r\n    ) \r\n}\r\n\r\nexport default NewPerson","import React from 'react'\r\n\r\nconst FilterPerson = (props) => {\r\n    return (\r\n        <form>\r\n        rajaa näytettäviä\r\n        <input\r\n            value={props.newSearch}\r\n            onChange={props.handleSearchChange} />\r\n            <br />\r\n        </form> \r\n    ) \r\n}\r\n\r\nexport default FilterPerson","import React from 'react'\r\n\r\nconst Person = (props, deletePerson) => {\r\n    return (\r\n      <li>{props.name}  {props.number} <button onClick={props.deletePerson}>Poista</button></li>\r\n    )\r\n  }\r\n\r\n  export default Person","\r\nimport React from 'react'\r\nimport Person from './Person'\r\n\r\nconst Persons = (props) => {\r\n    return (\r\n        <ul>\r\n            {props.persons.filter(person => person.name.toUpperCase().includes(props.newSearch.toUpperCase())).map(person => (\r\n            <Person key={person.id} name={person.name} number={person.number} deletePerson={props.handleDeletePerson(person.name, person.id)} /> ))}\r\n        </ul> \r\n    ) \r\n}\r\n\r\nexport default Persons","import axios from 'axios'\r\n// const baseUrl = 'http://localhost:3001/persons'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n    const request = axios.get(baseUrl)\r\n    return request.then(response => response.data)\r\n  }\r\n\r\nconst create = newObject => {\r\n  const request = axios.post(baseUrl, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst deletePerson = (id) => {\r\n  const request = axios.delete(`${baseUrl}/${id}`)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nexport default { \r\n  getAll: getAll, \r\n  create: create, \r\n  update: update,\r\n  deletePerson: deletePerson\r\n}\r\n\r\n\r\n","import React from 'react'\r\nconst Notification = ({ message }) => {\r\n    if (message === null) {\r\n      return null\r\n    }\r\n  \r\n    return (\r\n      <div className=\"error\">\r\n        {message}\r\n      </div>\r\n    )\r\n  }\r\n\r\n  export default Notification;","import React, { useState, useEffect } from 'react'\r\nimport NewPerson from './components/AddPerson';\r\nimport FilterPerson from './components/FilterPerson';\r\nimport Persons from './components/Persons';\r\nimport personDB from './services/personDB';\r\nimport Notification from './components/Notification';\r\n\r\n\r\nconst App = () => {\r\n  const [ persons, setPersons] = useState([]) \r\n  const [ newName, setNewName ] = useState('')\r\n  const [ newNumber, setNewNumber ] = useState('')\r\n  const [ newSearch, setNewSearch ] = useState('')\r\n  const [ errorMessage, setErrorMessage ] = useState(null)\r\n\r\n  const handleNameChange = (event) => {\r\n    setNewName(event.target.value)\r\n  }\r\n\r\n  const handleNumberChange = (event) => {\r\n    setNewNumber(event.target.value)\r\n  }\r\n\r\n  const handleSearchChange = (event) => {\r\n    setNewSearch(event.target.value)\r\n  }\r\n\r\n  const handleDeletePerson = (name, id) => {\r\n    return () => {\r\n        if (window.confirm(`Poistetaanko ${name} ?`)) {\r\n            personDB.deletePerson(id)\r\n            .then(() => {\r\n                setPersons(persons.filter(n => n.id !== id))\r\n                setErrorMessage(`Poistettiin ${name}`)\r\n                setNewName('')\r\n                setNewNumber('')\r\n            });\r\n            setTimeout(() => { \r\n                setErrorMessage(null)                \r\n            }, 3000);\r\n        }\r\n    }\r\n  }\r\n\r\n  useEffect(() => {    \r\n    personDB.getAll().then(response => { \r\n        setPersons(response)})\r\n}, [])\r\n\r\n\r\n  const addPerson = (event) => {\r\n    event.preventDefault()\r\n\r\n    const personObject = {\r\n        name: newName,\r\n        number: newNumber,\r\n        id: persons.length + 1,\r\n    }\r\n\r\n    if (persons.filter(person => person.name === personObject.name).length > 0)  {\r\n        if ( window.confirm(`${personObject.name} on jo luettelossa, korvataanko vanha numero uudella?`)) {\r\n            const previousPerson = persons.find(n => n.name === newName)\r\n            personDB.replace({...previousPerson, number: newNumber })\r\n            .then(updatedPerson => {\r\n                setPersons(persons.map(n => n.name === newName ? updatedPerson : n))\r\n            }).catch(error => {\r\n                setErrorMessage(error.response.data)\r\n            })\r\n            setPersons(persons.concat(personObject))\r\n            setErrorMessage(`Muutettiin ${personObject.name} numero`)\r\n            setNewName('')\r\n            setNewNumber('')\r\n            setTimeout(() => { \r\n                setErrorMessage(null) \r\n            }, 3000);\r\n        }\r\n    } else {\r\n        personDB.create(personObject).then(newPerson => {\r\n            setPersons(persons.concat(newPerson))\r\n            setErrorMessage(`Lisättiin ${personObject.name}`)\r\n            setNewName('')\r\n            setNewNumber('')\r\n        })\r\n        .catch(error => {\r\n            setErrorMessage(`${error.response.data.error}`)\r\n            console.log(error.response.data)\r\n          });\r\n        setTimeout(() => { setErrorMessage(null) }, 3000);\r\n    }\r\n}\r\n\r\n  return (\r\n    <div>\r\n        <h2>Puhelinluettelo</h2>\r\n        <Notification message={errorMessage} />\r\n        <FilterPerson newSearch={newSearch} handleSearchChange={handleSearchChange} />\r\n        <h3>lisää uusi</h3>\r\n        <NewPerson newName={newName} newNumber={newNumber} handleNameChange={handleNameChange} handleNumberChange={handleNumberChange} addPerson={addPerson} />\r\n        <h3>Numerot</h3>\r\n        <Persons persons={persons} newSearch={newSearch} handleDeletePerson={handleDeletePerson} />\r\n    </div>\r\n  )\r\n\r\n}\r\n\r\nexport default App\r\n\r\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport './index.css'\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n)"],"sourceRoot":""}